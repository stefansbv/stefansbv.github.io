<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width">

  <title>
    
      Sqitch GUI development &middot; Ștefan Suciu&#39;s Blog
    
  </title>

  
  <link rel="stylesheet" href="http://stefansuciu.ro/css/poole.min.css"/>
  <link rel="stylesheet" href="http://stefansuciu.ro/css/syntax.min.css"/>
  <link rel="stylesheet" href="http://stefansuciu.ro/css/lanyon.min.css"/>
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400"/>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
  <link rel="stylesheet" href="http://stefansuciu.ro/css/prism.min.css"/>
  <link rel="stylesheet" href="http://stefansuciu.ro/css/style.min.css"/>

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://stefansuciu.ro/assets/apple-touch-icon-144-precomposed.png"/>
  <link rel="shortcut icon" href="http://stefansuciu.ro/assets/favicon.ico"/>

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://stefansuciu.ro/index.xml"/>

  
  <link rel="canonical" href="http://stefansuciu.ro/2015/07/sqitch-gui-development/"/>
</head>


  <body class="sidebar-overlay theme-base-08">

    
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">


<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A technologically oriented blog with a simple design.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item " href="http://stefansuciu.ro/posts">Home</a>
    <a class="sidebar-nav-item " href="http://stefansuciu.ro/posts">Posts</a>

    
    
      
        <a class="sidebar-nav-item " href="http://stefansuciu.ro/fixed/about/">About</a>
      
    
      
        <a class="sidebar-nav-item " href="http://stefansuciu.ro/fixed/projects/tpda3/intro/">Tpda3</a>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  </nav>

  <div class="sidebar-item">
    
    <span class="sidebar-list-label"><p>Categories:</p></span>
    <ul class="fa-ul">
      
      <li><i class="fa-li fa fa-check-square"></i><a href="http://stefansuciu.ro//categories/projects/index.html">Projects</a></li>
    
    </ul>
  </div>

  <div class="sidebar-item">
    <p>&copy; 2016. All rights reserved.</p>
  </div>
</div>


    
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="http://stefansuciu.ro/" title="Home">Ștefan Suciu&#39;s Blog</a>
          </h3>
        </div>
      </div>

      <div class="container content">


<div class="post">
  <h1 class="post-title">Sqitch GUI development</h1>

  <div class="flex-container">
    <div class="post-date">
      2015-07-05 in 
      <a href="http://stefansuciu.ro/categories/projects" class="btn btn-primary">Projects</a>
      
      <div class="tags">
        <i class="fa fa-tag"></i>
        
        <span class="muted">&middot;</span>
        <a class="tags" href="http://stefansuciu.ro/tags/wxperl">#wxperl</a>
        
        <span class="muted">&middot;</span>
        <a class="tags" href="http://stefansuciu.ro/tags/sqitch">#sqitch</a>
        
      </div>
    </div>
    <div class="post-date"> <span class="share-buttons">
	<a href="https://twitter.com/intent/tweet?source=http%3a%2f%2fstefansuciu.ro%2f2015%2f07%2fsqitch-gui-development%2f&text=Sqitch%20GUI%20development:http%3a%2f%2fstefansuciu.ro%2f2015%2f07%2fsqitch-gui-development%2f" target="_blank" title="Tweet"><i class="fa fa-twitter-square fa-lg"></i></a>
	<a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fstefansuciu.ro%2f2015%2f07%2fsqitch-gui-development%2f&title=Sqitch%20GUI%20development&summary=Sqitch%20GUI%20development&source=http%3a%2f%2fstefansuciu.ro%2f2015%2f07%2fsqitch-gui-development%2f" target="_blank" title="Share on LinkedIn"><i class="fa fa-linkedin-square fa-lg"></i></a>
</span>
 </div>
  </div>

  <p>I&rsquo;m experimenting with a project to make a GUI for the excellent
<a href="http://sqitch.org">Sqitch</a> database change management application.  I
started the project some time ago, and because lately it got some
attention from the author of Sqitch - <a href="https://github.com/theory">David
E. Wheeler</a>, I was stimulated to continue
working on it.</p>
<p>Sqitch was first written in Perl
<a href="https://metacpan.org/pod/Moose">Moose</a> as initially was my <a href="https://github.com/stefansbv/sqitch-gui">Sqitch
GUI</a> interface, but it was
rewritten in <a href="https://metacpan.org/pod/Moo">Moo</a> lately.</p>
<p>David suggested that I should also use Moo, so now as I write this, all
the GUI parts use Moo already (in the devel branch), and works quite
nicely with the exception of the wxPerl Menu component.</p>
<p>The translation to Moo was quite easy because Moo and Moose are
compatible, but involved heavy usage of my Emacs editor.  One of
the tricky parts was with the type system, but that was already solved
by David and I could easily adapt the Type module from Sqitch.  The
other tricky part was making Moo and wxPerl understand each other.
For the Moose version I used the <code>MooseX::NonMoose::InsideOut</code> module
and while switching to Moo I experimented with the <code>MooX::InsideOut</code>
module.</p>
<p>All was working well until I was rewriting a bigger part of the
application when I started getting errors like:</p>
<pre><code>Can't use string (&quot;&quot;menu_app&quot;&quot;) as a SCALAR ref while &quot;strict refs&quot; in use at .../lib/Method/Generate/Accessor/Role/InsideOut.pm line 21.

</code></pre><p>While looking on the Net for a solutions it turned out that it
doesn&rsquo;t even need the <code>MooX::InsideOut</code> module, Moo already has a
<code>FOREIGNBUILDARGS</code> method, thanks to
<a href="http://stackoverflow.com/users/1990570/tobyink">tobyink</a> for the
enlightening response on
[stackowerflow]((<a href="http://stackoverflow.com/questions/27544191/what-is-an-equivalent-of-moosexnonmoose-for-moo)">http://stackoverflow.com/questions/27544191/what-is-an-equivalent-of-moosexnonmoose-for-moo)</a>.</p>
<p>After removing the module, the error changed to:</p>
<pre><code>Can't locate object method &quot;menu_app&quot; via package &quot;Wx::MenuBar&quot; at lib/App/Sqitch/GUI/View/MenuBar.pm line 66.
</code></pre><p>This looks more familiar, but there is a <code>menu_app</code> method in the
<code>App::Sqitch::GUI::View::MenuBar</code> package, what&rsquo;s going on?  I managed
to reproduce the error with a script, but it took some time until I
realized where is the problem, the <code>via package</code> should be
<code>App::Sqitch::GUI::View::MenuBar</code> not <code>Wx::MenuBar</code>.  The solution of
the problem was, again, unexpected, there is no real need to subclass
<code>Wx::MenuBar</code>. See my question and the answers on
<a href="http://www.perlmonks.org/?node_id=1129292">PerlMonks</a>, for details,
if interested.</p>
<p>Here is a screen-shot of the application with it&rsquo;s current look:</p>
<!-- raw HTML omitted -->
<pre><code>    &lt;img style=&quot;max-width:100%;height:auto;&quot; src=&quot;/images/sqitch-gui-project.png&quot;  /&gt;
</code></pre>
<!-- raw HTML omitted -->
<p>Changes:</p>
<ul>
<li>Simplified projects dialog;</li>
<li>Add syntax highlighting to the log widget;</li>
<li>Started switching to Moo;</li>
<li>Hopefully an improved API;</li>
</ul>
  


  



</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62428437-1', 'auto');
  ga('send', 'pageview');

</script>



    
    <script src="http://stefansuciu.ro/js/main.min.js"></script>

  </body>
</html>

